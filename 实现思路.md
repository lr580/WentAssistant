> 也许称为系统建模/设计?

反正就是程序开发用的主要文档罢了，可以看成是注释集合体 QwQ



## 实现思路

> 本程序基于 Java 大作业和 V1.0 版本的基于 Python 的文常助手，在其中这两处已实现的内容将会略写，具体参考对应的项目。(后者不放出，前者在 `github` 有 awa)
>
> 仅描述实现上需要细想的功能，那些没什么太大思维难度的功能实现思路略

数据库连接、访问控制、导入导出大体而言与 Java 大作业实现思路一致；加解密同理。

#### 保存取消

##### 原复杂度

下面对 Java 大作业实现的保存和取消功能进行复杂度分析：

假设数据量为 $n$ ，那么进行一次覆盖的复杂度估计为 $O(n)$ (不懂MySQL原理，只是臆测，没有考究；如果建立B树之类的，也许是 $O(n\log n)$ 的)

理想而言，本程序可能需要应对的最大数据量为 $n=2\times10^5$ 。(V2.0+)，在当下版本， $n=10^4$ 完全足矣

事实上，这样的复杂度已经可以满足使用需求了，短时间内并不需要刻意去优化；假定每条数据长 $100\ Bytes$，那么存储一张表需要 $19.07\ MB$ ($n=2\times10^5$) ，也不是不能接受

从方便性和复杂度而言，都可以考虑直接基于原本的实现思路，即临时表-主表思路。并在此基础上分化出逐条操作即可



##### 逐步操作记录

整个操作序列可以用链表实现(`LinkedList`) ，设一个工作指针下标

每次进行更改操作时，若工作下标不是末尾，一直尾部删除直到到达，然后在尾部插入指令并工作指针自增

每次进行撤销操作将工作下标自减，执行该指令的逆操作

每次进行重做，工作指针自增(越界证明无法重做，那么不操作)，执行该指令的顺操作

每次进行保存，顺着遍历序列直到空，每次执行顺操作(在主表)，最后清空下标和序列



##### 指令

数据更改指令可能会包括插入、删除、修改

不考虑支持对导入、还原两个操作；当执行这两个操作时，若尚未保存(操作序列非空)直接提示不可逆，确认操作后，可以考虑强行清空下标和序列

不考虑支持其他操作，如修改密码、修改连接、修改设置项，只考虑对数据更改指令支持

基于之前实现的思路，独立存储 top 值，可以实现无论怎么反复撤销重做，序号不变

对外显示上，需要具备编号在内的全部必需信息，即：

插入和删除有完整的整个数据信息(含编号，下同)；编辑有编辑前后的信息

每次执行插入时，top 自增并插入到临时表；撤销时，top 自减并删除

每次执行修改时，用新数据覆盖原数据项；撤销时，原数据项覆盖新数据项

每次执行删除时，直接删除；撤销时用原序号插入

多条指令逐条分解(如不定项删除)



##### 新复杂度

设进行了 $k$ 次基本操作，单次更改显然都是 $O(1)$ ，保存时只需要再执行一次这 $k$ 个操作，所以是 $O(k)$ ，较 $O(n)$ 有优化，即未变动的数据全部不需要再次覆盖，相当于实现了保存撤销时，所有操作最后都在主表和临时表各执行了一次，所以复杂度是 $O(2k)=O(k)$ ，如果完全按原本的 Java 大作业实现思路来做，复杂度是 $O(k+n)=O(n)$ (假定 $k$ 远小于 $n$ )。虽然实际上不会有明显的感觉，但是仍然是优化。



#### 类别

节点需要有的信息域有：序号、名字、权重

根据实际情况，类别的节点数估计不会超过 $n=100$ ，所以基本上怎么搞都行，方便就行了，不需要用到很复杂的图论算法，复杂度是绰绰有余的

规定单点删除会一并删除其子树

可以使用链式前向星存即可，放在数据库的某一项里(text)，依次存点数组和边数组，`cnt` 



## 开发文档

### 文件列表



### 数据库结构



### 类包结构



## 问题和解决



## 更新日志

~~欢迎 `git lg`~~

有空写